# 内存管理

## python的垃圾回收机制原理

- 引用技术为主（缺点：循环引用无法解决）
- 引入标记清除和分代回收解决引用计数的问题
- 引用计数为主+标记清除和分代回收为辅

引用计数：

a = None, del a， 离开对象的作用域等等，减少引用计数

getrefcount(a)

什么时候引用计数增加呢？

- 对象创建 a = 1
- 对象被音乐 b = a
- 对象作为参数传递 func(a)
- 对象存储在容器中 l = [a]

什么时候音乐计数会减少呢？

- 显示使用del a
- 引用指向了别的对象 b = None
- 离开的对象的作用域(比如函数执行结束)
- 从一个容器移除对象或者销毁容器

循环引用：两个对象互相引用之后引用计数无法归零

标记清除，从根对象找到所有可达的点，不可达的清除掉

分代回收，三代，每隔一段时间，分别对每一代进行标记回收
gc.get_threshold()
